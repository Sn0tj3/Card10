image: monachus/hugo


variables:
  GIT_SUBMODULE_STRATEGY: recursive

pages:
  script:
  - git status
  - git submodule foreach git pull origin master
  - pushd content
  - git status
  - popd
  - yarn add sass
  - ./node_modules/.bin/sass style/main.scss static/css/main.css
  - hugo
  artifacts:
    paths:
    - public
    expire_in: 10m
  only:
  - master
